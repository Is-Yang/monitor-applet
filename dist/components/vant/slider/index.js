"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var component_1 = require('./../common/component.js');
var touch_1 = require('./../mixins/touch.js');
var utils_1 = require('./../common/utils.js');
component_1.VantComponent({
    mixins: [touch_1.touch],
    props: {
        disabled: Boolean,
        useButtonSlot: Boolean,
        activeColor: String,
        inactiveColor: String,
        max: {
            type: Number,
            value: 100
        },
        min: {
            type: Number,
            value: 0
        },
        step: {
            type: Number,
            value: 1
        },
        value: {
            type: Number,
            value: 0,
            observer: function observer(value) {
                this.updateValue(value, false);
            }
        },
        barHeight: {
            type: null,
            value: '2px'
        }
    },
    created: function created() {
        this.updateValue(this.data.value);
    },
    methods: {
        onTouchStart: function onTouchStart(event) {
            if (this.data.disabled) return;
            this.touchStart(event);
            this.startValue = this.format(this.data.value);
            this.dragStatus = 'start';
        },
        onTouchMove: function onTouchMove(event) {
            var _this = this;
            if (this.data.disabled) return;
            if (this.dragStatus === 'start') {
                this.$emit('drag-start');
            }
            this.touchMove(event);
            this.dragStatus = 'draging';
            this.getRect('.van-slider').then(function (rect) {
                var diff = _this.deltaX / rect.width * 100;
                _this.newValue = _this.startValue + diff;
                _this.updateValue(_this.newValue, false, true);
            });
        },
        onTouchEnd: function onTouchEnd() {
            if (this.data.disabled) return;
            if (this.dragStatus === 'draging') {
                this.updateValue(this.newValue, true);
                this.$emit('drag-end');
            }
        },
        onClick: function onClick(event) {
            var _this = this;
            if (this.data.disabled) return;
            var min = this.data.min;
            this.getRect('.van-slider').then(function (rect) {
                var value = (event.detail.x - rect.left) / rect.width * _this.getRange() + min;
                _this.updateValue(value, true);
            });
        },
        updateValue: function updateValue(value, end, drag) {
            value = this.format(value);
            var _a = this.data,
                barHeight = _a.barHeight,
                min = _a.min;
            var width = (value - min) * 100 / this.getRange() + "%";
            this.setData({
                value: value,
                barStyle: "\n          width: " + width + ";\n          height: " + utils_1.addUnit(barHeight) + ";\n          " + (drag ? 'transition: none;' : '') + "\n        "
            });
            if (drag) {
                this.$emit('drag', { value: value });
            }
            if (end) {
                this.$emit('change', value);
            }
        },
        getRange: function getRange() {
            var _a = this.data,
                max = _a.max,
                min = _a.min;
            return max - min;
        },
        format: function format(value) {
            var _a = this.data,
                max = _a.max,
                min = _a.min,
                step = _a.step;
            return Math.round(Math.max(min, Math.min(value, max)) / step) * step;
        }
    }
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluZGV4LmpzIl0sIm5hbWVzIjpbIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZXhwb3J0cyIsInZhbHVlIiwiY29tcG9uZW50XzEiLCJyZXF1aXJlIiwidG91Y2hfMSIsInV0aWxzXzEiLCJWYW50Q29tcG9uZW50IiwibWl4aW5zIiwidG91Y2giLCJwcm9wcyIsImRpc2FibGVkIiwiQm9vbGVhbiIsInVzZUJ1dHRvblNsb3QiLCJhY3RpdmVDb2xvciIsIlN0cmluZyIsImluYWN0aXZlQ29sb3IiLCJtYXgiLCJ0eXBlIiwiTnVtYmVyIiwibWluIiwic3RlcCIsIm9ic2VydmVyIiwidXBkYXRlVmFsdWUiLCJiYXJIZWlnaHQiLCJjcmVhdGVkIiwiZGF0YSIsIm1ldGhvZHMiLCJvblRvdWNoU3RhcnQiLCJldmVudCIsInRvdWNoU3RhcnQiLCJzdGFydFZhbHVlIiwiZm9ybWF0IiwiZHJhZ1N0YXR1cyIsIm9uVG91Y2hNb3ZlIiwiX3RoaXMiLCIkZW1pdCIsInRvdWNoTW92ZSIsImdldFJlY3QiLCJ0aGVuIiwicmVjdCIsImRpZmYiLCJkZWx0YVgiLCJ3aWR0aCIsIm5ld1ZhbHVlIiwib25Ub3VjaEVuZCIsIm9uQ2xpY2siLCJkZXRhaWwiLCJ4IiwibGVmdCIsImdldFJhbmdlIiwiZW5kIiwiZHJhZyIsIl9hIiwic2V0RGF0YSIsImJhclN0eWxlIiwiYWRkVW5pdCIsIk1hdGgiLCJyb3VuZCJdLCJtYXBwaW5ncyI6IkFBQUE7O0FBQ0FBLE9BQU9DLGNBQVAsQ0FBc0JDLE9BQXRCLEVBQStCLFlBQS9CLEVBQTZDLEVBQUVDLE9BQU8sSUFBVCxFQUE3QztBQUNBLElBQUlDLGNBQWNDLFFBQVEscUJBQVIsQ0FBbEI7QUFDQSxJQUFJQyxVQUFVRCxRQUFRLGlCQUFSLENBQWQ7QUFDQSxJQUFJRSxVQUFVRixRQUFRLGlCQUFSLENBQWQ7QUFDQUQsWUFBWUksYUFBWixDQUEwQjtBQUN0QkMsWUFBUSxDQUFDSCxRQUFRSSxLQUFULENBRGM7QUFFdEJDLFdBQU87QUFD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Z0JBQWdEQyxPQUFPZ0MsR0FBR2hDLElBQTFEO0FBQ0EsbUJBQU9vQyxLQUFLQyxLQUFMLENBQVdELEtBQUt4QyxHQUFMLENBQVNHLEdBQVQsRUFBY3FDLEtBQUtyQyxHQUFMLENBQVNsQixLQUFULEVBQWdCZSxHQUFoQixDQUFkLElBQXNDSSxJQUFqRCxJQUF5REEsSUFBaEU7QUFDSDtBQS9ESTtBQWxDYSxDQUExQiIsImZpbGUiOiJpbmRleC5qcyIsInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xudmFyIGNvbXBvbmVudF8xID0gcmVxdWlyZShcIi4uL2NvbW1vbi9jb21wb25lbnRcIik7XG52YXIgdG91Y2hfMSA9IHJlcXVpcmUoXCIuLi9taXhpbnMvdG91Y2hcIik7XG52YXIgdXRpbHNfMSA9IHJlcXVpcmUoXCIuLi9jb21tb24vdXRpbHNcIik7XG5jb21wb25lbnRfMS5WYW50Q29tcG9uZW50KHtcbiAgICBtaXhpbnM6IFt0b3VjaF8xLnRvdWNoXSxcbiAgICBwcm9wczoge1xuICAgICAgICBkaXNhYmxlZDogQm9vbGVhbixcbiAgICAgICAgdXNlQnV0dG9uU2xvdDogQm9vbGVhbixcbiAgICAgICAgYWN0aXZlQ29sb3I6IFN0cmluZyxcbiAgICAgICAgaW5hY3RpdmVDb2xvcjogU3RyaW5nLFxuICAgICAgICBtYXg6IHtcbiAgICAgICAgICAgIHR5cGU6IE51bWJlcixcbiAgICAgICAgICAgIHZhbHVlOiAxMDBcbiAgICAgICAgfSxcbiAgICAgICAgbWluOiB7XG4gICAgICAgICAgICB0eXBlOiBOdW1iZXIsXG4gICAgICAgICAgICB2YWx1ZTogMFxuICAgICAgICB9LFxuICAgICAgICBzdGVwOiB7XG4gICAgICAgICAgICB0eXBlOiBOdW1iZXIsXG4gICAgICAgICAgICB2YWx1ZTogMVxuICAgICAgICB9LFxuICAgICAgICB2YWx1ZToge1xuICAgICAgICAgICAgdHlwZTogTnVtYmVyLFxuICAgICAgICAgICAgdmFsdWU6IDAsXG4gICAgICAgICAgICBvYnNlcnZlcjogZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgICAgICAgICAgdGhpcy51cGRhdGVWYWx1ZSh2YWx1ZSwgZmFsc2UpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBiYXJIZWlnaHQ6IHtcbiAgICAgICAgICAgIHR5cGU6IG51bGwsXG4gICAgICAgICAgICB2YWx1ZTogJzJweCdcbiAgICAgICAgfVxuICAgIH0sXG4gICAgY3JlYXRlZDogZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLnVwZGF0ZVZhbHVlKHRoaXMuZGF0YS52YWx1ZSk7XG4gICAgfSxcbiAgICBtZXRob2RzOiB7XG4gICAgICAgIG9uVG91Y2hTdGFydDogZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgICAgICBpZiAodGhpcy5kYXRhLmRpc2FibGVkKVxuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIHRoaXMudG91Y2hTdGFydChldmVudCk7XG4gICAgICAgICAgICB0aGlzLnN0YXJ0VmFsdWUgPSB0aGlzLmZvcm1hdCh0aGlzLmRhdGEudmFsdWUpO1xuICAgICAgICAgICAgdGhpcy5kcmFnU3RhdHVzID0gJ3N0YXJ0JztcbiAgICAgICAgfSxcbiAgICAgICAgb25Ub3VjaE1vdmU6IGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgICAgIGlmICh0aGlzLmRhdGEuZGlzYWJsZWQpXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgaWYgKHRoaXMuZHJhZ1N0YXR1cyA9PT0gJ3N0YXJ0Jykge1xuICAgICAgICAgICAgICAgIHRoaXMuJGVtaXQoJ2RyYWctc3RhcnQnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMudG91Y2hNb3ZlKGV2ZW50KTtcbiAgICAgICAgICAgIHRoaXMuZHJhZ1N0YXR1cyA9ICdkcmFnaW5nJztcbiAgICAgICAgICAgIHRoaXMuZ2V0UmVjdCgnLnZhbi1zbGlkZXInKS50aGVuKGZ1bmN0aW9uIChyZWN0KSB7XG4gICAgICAgICAgICAgICAgdmFyIGRpZmYgPSAoX3RoaXMuZGVsdGFYIC8gcmVjdC53aWR0aCkgKiAxMDA7XG4gICAgICAgICAgICAgICAgX3RoaXMubmV3VmFsdWUgPSBfdGhpcy5zdGFydFZhbHVlICsgZGlmZjtcbiAgICAgICAgICAgICAgICBfdGhpcy51cGRhdGVWYWx1ZShfdGhpcy5uZXdWYWx1ZSwgZmFsc2UsIHRydWUpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0sXG4gICAgICAgIG9uVG91Y2hFbmQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLmRhdGEuZGlzYWJsZWQpXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgaWYgKHRoaXMuZHJhZ1N0YXR1cyA9PT0gJ2RyYWdpbmcnKSB7XG4gICAgICAgICAgICAgICAgdGhpcy51cGRhdGVWYWx1ZSh0aGlzLm5ld1ZhbHVlLCB0cnVlKTtcbiAgICAgICAgICAgICAgICB0aGlzLiRlbWl0KCdkcmFnLWVuZCcpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBvbkNsaWNrOiBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgICAgICBpZiAodGhpcy5kYXRhLmRpc2FibGVkKVxuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIHZhciBtaW4gPSB0aGlzLmRhdGEubWluO1xuICAgICAgICAgICAgdGhpcy5nZXRSZWN0KCcudmFuLXNsaWRlcicpLnRoZW4oZnVuY3Rpb24gKHJlY3QpIHtcbiAgICAgICAgICAgICAgICB2YXIgdmFsdWUgPSAoKGV2ZW50LmRldGFpbC54IC0gcmVjdC5sZWZ0KSAvIHJlY3Qud2lkdGgpICogX3RoaXMuZ2V0UmFuZ2UoKSArIG1pbjtcbiAgICAgICAgICAgICAgICBfdGhpcy51cGRhdGVWYWx1ZSh2YWx1ZSwgdHJ1ZSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSxcbiAgICAgICAgdXBkYXRlVmFsdWU6IGZ1bmN0aW9uICh2YWx1ZSwgZW5kLCBkcmFnKSB7XG4gICAgICAgICAgICB2YWx1ZSA9IHRoaXMuZm9ybWF0KHZhbHVlKTtcbiAgICAgICAgICAgIHZhciBfYSA9IHRoaXMuZGF0YSwgYmFySGVpZ2h0ID0gX2EuYmFySGVpZ2h0LCBtaW4gPSBfYS5taW47XG4gICAgICAgICAgICB2YXIgd2lkdGggPSAoKHZhbHVlIC0gbWluKSAqIDEwMCkgLyB0aGlzLmdldFJhbmdlKCkgKyBcIiVcIjtcbiAgICAgICAgICAgIHRoaXMuc2V0RGF0YSh7XG4gICAgICAgICAgICAgICAgdmFsdWU6IHZhbHVlLFxuICAgICAgICAgICAgICAgIGJhclN0eWxlOiBcIlxcbiAgICAgICAgICB3aWR0aDogXCIgKyB3aWR0aCArIFwiO1xcbiAgICAgICAgICBoZWlnaHQ6IFwiICsgdXRpbHNfMS5hZGRVbml0KGJhckhlaWdodCkgKyBcIjtcXG4gICAgICAgICAgXCIgKyAoZHJhZyA/ICd0cmFuc2l0aW9uOiBub25lOycgOiAnJykgKyBcIlxcbiAgICAgICAgXCIsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGlmIChkcmFnKSB7XG4gICAgICAgICAgICAgICAgdGhpcy4kZW1pdCgnZHJhZycsIHsgdmFsdWU6IHZhbHVlIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGVuZCkge1xuICAgICAgICAgICAgICAgIHRoaXMuJGVtaXQoJ2NoYW5nZScsIHZhbHVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgZ2V0UmFuZ2U6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBfYSA9IHRoaXMuZGF0YSwgbWF4ID0gX2EubWF4LCBtaW4gPSBfYS5taW47XG4gICAgICAgICAgICByZXR1cm4gbWF4IC0gbWluO1xuICAgICAgICB9LFxuICAgICAgICBmb3JtYXQ6IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICAgICAgdmFyIF9hID0gdGhpcy5kYXRhLCBtYXggPSBfYS5tYXgsIG1pbiA9IF9hLm1pbiwgc3RlcCA9IF9hLnN0ZXA7XG4gICAgICAgICAgICByZXR1cm4gTWF0aC5yb3VuZChNYXRoLm1heChtaW4sIE1hdGgubWluKHZhbHVlLCBtYXgpKSAvIHN0ZXApICogc3RlcDtcbiAgICAgICAgfVxuICAgIH1cbn0pO1xuIl19