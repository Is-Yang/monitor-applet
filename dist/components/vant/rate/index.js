"use strict";

var __assign = undefined && undefined.__assign || function () {
    __assign = Object.assign || function (t) {
        for (var s, i = 1, n = arguments.length; i < n; i++) {
            s = arguments[i];
            for (var p in s) {
                if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];
            }
        }
        return t;
    };
    return __assign.apply(this, arguments);
};
Object.defineProperty(exports, "__esModule", { value: true });
var component_1 = require('./../common/component.js');
component_1.VantComponent({
    field: true,
    classes: ['icon-class'],
    props: {
        value: {
            type: Number,
            observer: function observer(value) {
                if (value !== this.data.innerValue) {
                    this.setData({ innerValue: value });
                }
            }
        },
        readonly: Boolean,
        disabled: Boolean,
        allowHalf: Boolean,
        size: null,
        icon: {
            type: String,
            value: 'star'
        },
        voidIcon: {
            type: String,
            value: 'star-o'
        },
        color: {
            type: String,
            value: '#ffd21e'
        },
        voidColor: {
            type: String,
            value: '#c7c7c7'
        },
        disabledColor: {
            type: String,
            value: '#bdbdbd'
        },
        count: {
            type: Number,
            value: 5,
            observer: function observer(value) {
                this.setData({ innerCountArray: Array.from({ length: value }) });
            }
        },
        gutter: null,
        touchable: {
            type: Boolean,
            value: true
        }
    },
    data: {
        innerValue: 0,
        innerCountArray: Array.from({ length: 5 })
    },
    methods: {
        onSelect: function onSelect(event) {
            var data = this.data;
            var score = event.currentTarget.dataset.score;
            if (!data.disabled && !data.readonly) {
                this.setData({ innerValue: score + 1 });
                this.$emit('input', score + 1);
                this.$emit('change', score + 1);
            }
        },
        onTouchMove: function onTouchMove(event) {
            var _this = this;
            var touchable = this.data.touchable;
            if (!touchable) return;
            var clientX = event.touches[0].clientX;
            this.getRect('.van-rate__icon', true).then(function (list) {
                var target = list.sort(function (item) {
                    return item.right - item.left;
                }).find(function (item) {
                    return clientX >= item.left && clientX <= item.right;
                });
                if (target != null) {
                    _this.onSelect(__assign(__assign({}, event), { currentTarget: target }));
                }
            });
        }
    }
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluZGV4LmpzIl0sIm5hbWVzIjpbIl9fYXNzaWduIiwiT2JqZWN0IiwiYXNzaWduIiwidCIsInMiLCJpIiwibiIsImFyZ3VtZW50cyIsImxlbmd0aCIsInAiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsImNhbGwiLCJhcHBseSIsImRlZmluZVByb3BlcnR5IiwiZXhwb3J0cyIsInZhbHVlIiwiY29tcG9uZW50XzEiLCJyZXF1aXJlIiwiVmFudENvbXBvbmVudCIsImZpZWxkIiwiY2xhc3NlcyIsInByb3BzIiwidHlwZSIsIk51bWJlciIsIm9ic2VydmVyIiwiZGF0YSIsImlubmVyVmFsdWUiLCJzZXREYXRhIiwicmVhZG9ubHkiLCJCb29sZWFuIiwiZGlzYWJsZWQiLCJhbGxvd0hhbGYiLCJzaXplIiwiaWNvbiIsIlN0cmluZyIsInZvaWRJY29uIiwiY29sb3IiLCJ2b2lkQ29sb3IiLCJkaXNhYmxlZENvbG9yIiwiY291bnQiLCJpbm5lckNvdW50QXJyYXkiLCJBcnJheSIsImZyb20iLCJndXR0ZXIiLCJ0b3VjaGFibGUiLCJtZXRob2RzIiwib25TZWxlY3QiLCJldmVudCIsInNjb3JlIiwiY3VycmVudFRhcmdldCIsImRhdGFzZXQiLCIkZW1pdCIsIm9uVG91Y2hNb3ZlIiwiX3RoaXMiLCJjbGllbnRYIiwidG91Y2hlcyIsImdldFJlY3QiLCJ0aGVuIiwibGlzdCIsInRhcmdldCIsInNvcnQiLCJpdGVtIiwicmlnaHQiLCJsZWZ0IiwiZmluZCJdLCJtYXBwaW5ncyI6IkFBQUE7O0FBQ0EsSUFBSUEsV0FBWSxhQUFRLFVBQUtBLFFBQWQsSUFBMkIsWUFBWTtBQUNsREEsZUFBV0MsT0FBT0MsTUFBUCxJQUFpQixVQUFTQyxDQUFULEVBQVk7QUFDcEMsYUFBSyxJQUFJQyxDQUFKLEVBQU9DLElBQUksQ0FBWCxFQUFjQyxJQUFJQyxVQUFVQyxNQUFqQyxFQUF5Q0gsSUFBSUMsQ0FBN0MsRUFBZ0RELEdBQWhELEVBQXFEO0FBQ2pERCxnQkFBSUcsVUFB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QUFVUCxNQUFNUSxPQUFOLENBQWMsQ0FBZCxFQUFpQkQsT0FBL0I7QUFDQSxpQkFBS0UsT0FBTCxDQUFhLGlCQUFiLEVBQWdDLElBQWhDLEVBQXNDQyxJQUF0QyxDQUEyQyxVQUFVQyxJQUFWLEVBQWdCO0FBQ3ZELG9CQUFJQyxTQUFTRCxLQUNSRSxJQURRLENBQ0gsVUFBVUMsSUFBVixFQUFnQjtBQUFFLDJCQUFPQSxLQUFLQyxLQUFMLEdBQWFELEtBQUtFLElBQXpCO0FBQWdDLGlCQUQvQyxFQUVSQyxJQUZRLENBRUgsVUFBVUgsSUFBVixFQUFnQjtBQUFFLDJCQUFPUCxXQUFXTyxLQUFLRSxJQUFoQixJQUF3QlQsV0FBV08sS0FBS0MsS0FBL0M7QUFBdUQsaUJBRnRFLENBQWI7QUFHQSxvQkFBSUgsVUFBVSxJQUFkLEVBQW9CO0FBQ2hCTiwwQkFBTVAsUUFBTixDQUFlL0MsU0FBU0EsU0FBUyxFQUFULEVBQWFnRCxLQUFiLENBQVQsRUFBOEIsRUFBRUUsZUFBZVUsTUFBakIsRUFBOUIsQ0FBZjtBQUNIO0FBQ0osYUFQRDtBQVFIO0FBeEJJO0FBckRhLENBQTFCIiwiZmlsZSI6ImluZGV4LmpzIiwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgX19hc3NpZ24gPSAodGhpcyAmJiB0aGlzLl9fYXNzaWduKSB8fCBmdW5jdGlvbiAoKSB7XG4gICAgX19hc3NpZ24gPSBPYmplY3QuYXNzaWduIHx8IGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgZm9yICh2YXIgcywgaSA9IDEsIG4gPSBhcmd1bWVudHMubGVuZ3RoOyBpIDwgbjsgaSsrKSB7XG4gICAgICAgICAgICBzID0gYXJndW1lbnRzW2ldO1xuICAgICAgICAgICAgZm9yICh2YXIgcCBpbiBzKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHMsIHApKVxuICAgICAgICAgICAgICAgIHRbcF0gPSBzW3BdO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0O1xuICAgIH07XG4gICAgcmV0dXJuIF9fYXNzaWduLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG59O1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xudmFyIGNvbXBvbmVudF8xID0gcmVxdWlyZShcIi4uL2NvbW1vbi9jb21wb25lbnRcIik7XG5jb21wb25lbnRfMS5WYW50Q29tcG9uZW50KHtcbiAgICBmaWVsZDogdHJ1ZSxcbiAgICBjbGFzc2VzOiBbJ2ljb24tY2xhc3MnXSxcbiAgICBwcm9wczoge1xuICAgICAgICB2YWx1ZToge1xuICAgICAgICAgICAgdHlwZTogTnVtYmVyLFxuICAgICAgICAgICAgb2JzZXJ2ZXI6IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICAgICAgICAgIGlmICh2YWx1ZSAhPT0gdGhpcy5kYXRhLmlubmVyVmFsdWUpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXREYXRhKHsgaW5uZXJWYWx1ZTogdmFsdWUgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICByZWFkb25seTogQm9vbGVhbixcbiAgICAgICAgZGlzYWJsZWQ6IEJvb2xlYW4sXG4gICAgICAgIGFsbG93SGFsZjogQm9vbGVhbixcbiAgICAgICAgc2l6ZTogbnVsbCxcbiAgICAgICAgaWNvbjoge1xuICAgICAgICAgICAgdHlwZTogU3RyaW5nLFxuICAgICAgICAgICAgdmFsdWU6ICdzdGFyJ1xuICAgICAgICB9LFxuICAgICAgICB2b2lkSWNvbjoge1xuICAgICAgICAgICAgdHlwZTogU3RyaW5nLFxuICAgICAgICAgICAgdmFsdWU6ICdzdGFyLW8nXG4gICAgICAgIH0sXG4gICAgICAgIGNvbG9yOiB7XG4gICAgICAgICAgICB0eXBlOiBTdHJpbmcsXG4gICAgICAgICAgICB2YWx1ZTogJyNmZmQyMWUnXG4gICAgICAgIH0sXG4gICAgICAgIHZvaWRDb2xvcjoge1xuICAgICAgICAgICAgdHlwZTogU3RyaW5nLFxuICAgICAgICAgICAgdmFsdWU6ICcjYzdjN2M3J1xuICAgICAgICB9LFxuICAgICAgICBkaXNhYmxlZENvbG9yOiB7XG4gICAgICAgICAgICB0eXBlOiBTdHJpbmcsXG4gICAgICAgICAgICB2YWx1ZTogJyNiZGJkYmQnXG4gICAgICAgIH0sXG4gICAgICAgIGNvdW50OiB7XG4gICAgICAgICAgICB0eXBlOiBOdW1iZXIsXG4gICAgICAgICAgICB2YWx1ZTogNSxcbiAgICAgICAgICAgIG9ic2VydmVyOiBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNldERhdGEoeyBpbm5lckNvdW50QXJyYXk6IEFycmF5LmZyb20oeyBsZW5ndGg6IHZhbHVlIH0pIH0pO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgfSxcbiAgICAgICAgZ3V0dGVyOiBudWxsLFxuICAgICAgICB0b3VjaGFibGU6IHtcbiAgICAgICAgICAgIHR5cGU6IEJvb2xlYW4sXG4gICAgICAgICAgICB2YWx1ZTogdHJ1ZVxuICAgICAgICB9XG4gICAgfSxcbiAgICBkYXRhOiB7XG4gICAgICAgIGlubmVyVmFsdWU6IDAsXG4gICAgICAgIGlubmVyQ291bnRBcnJheTogQXJyYXkuZnJvbSh7IGxlbmd0aDogNSB9KSxcbiAgICB9LFxuICAgIG1ldGhvZHM6IHtcbiAgICAgICAgb25TZWxlY3Q6IGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICAgICAgdmFyIGRhdGEgPSB0aGlzLmRhdGE7XG4gICAgICAgICAgICB2YXIgc2NvcmUgPSBldmVudC5jdXJyZW50VGFyZ2V0LmRhdGFzZXQuc2NvcmU7XG4gICAgICAgICAgICBpZiAoIWRhdGEuZGlzYWJsZWQgJiYgIWRhdGEucmVhZG9ubHkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNldERhdGEoeyBpbm5lclZhbHVlOiBzY29yZSArIDEgfSk7XG4gICAgICAgICAgICAgICAgdGhpcy4kZW1pdCgnaW5wdXQnLCBzY29yZSArIDEpO1xuICAgICAgICAgICAgICAgIHRoaXMuJGVtaXQoJ2NoYW5nZScsIHNjb3JlICsgMSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIG9uVG91Y2hNb3ZlOiBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgICAgICB2YXIgdG91Y2hhYmxlID0gdGhpcy5kYXRhLnRvdWNoYWJsZTtcbiAgICAgICAgICAgIGlmICghdG91Y2hhYmxlKVxuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIHZhciBjbGllbnRYID0gZXZlbnQudG91Y2hlc1swXS5jbGllbnRYO1xuICAgICAgICAgICAgdGhpcy5nZXRSZWN0KCcudmFuLXJhdGVfX2ljb24nLCB0cnVlKS50aGVuKGZ1bmN0aW9uIChsaXN0KSB7XG4gICAgICAgICAgICAgICAgdmFyIHRhcmdldCA9IGxpc3RcbiAgICAgICAgICAgICAgICAgICAgLnNvcnQoZnVuY3Rpb24gKGl0ZW0pIHsgcmV0dXJuIGl0ZW0ucmlnaHQgLSBpdGVtLmxlZnQ7IH0pXG4gICAgICAgICAgICAgICAgICAgIC5maW5kKGZ1bmN0aW9uIChpdGVtKSB7IHJldHVybiBjbGllbnRYID49IGl0ZW0ubGVmdCAmJiBjbGllbnRYIDw9IGl0ZW0ucmlnaHQ7IH0pO1xuICAgICAgICAgICAgICAgIGlmICh0YXJnZXQgIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICBfdGhpcy5vblNlbGVjdChfX2Fzc2lnbihfX2Fzc2lnbih7fSwgZXZlbnQpLCB7IGN1cnJlbnRUYXJnZXQ6IHRhcmdldCB9KSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9XG59KTtcbiJdfQ==