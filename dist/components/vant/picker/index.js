"use strict";var __assign=function(){return __assign=Object.assign||function(e){for(var t,n=1,s=arguments.length;n<s;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},__assign.apply(this,arguments)};Object.defineProperty(exports,"__esModule",{value:!0});var component_1=require("./../common/component.js"),shared_1=require("./shared.js");component_1.VantComponent({classes:["active-class","toolbar-class","column-class"],props:__assign(__assign({},shared_1.pickerProps),{valueKey:{type:String,value:"text"},toolbarPosition:{type:String,value:"top"},defaultIndex:{type:Number,value:0},columns:{type:Array,value:[],observer:function(e){void 0===e&&(e=[]),this.simple=e.length&&!e[0].values,this.children=this.selectAllComponents(".van-picker__column"),Array.isArray(this.children)&&this.children.length&&this.setColumns().catch(function(){})}}}),beforeCreate:function(){this.children=[]},methods:{noop:function(){},setColumns:function(){var e=this,t=this.data,n=this.simple?[{values:t.columns}]:t.columns,s=n.map(function(t,n){return e.setColumnValues(n,t.values)});return Promise.all(s)},emit:function(e){var t=e.currentTarget.dataset.type;this.simple?this.$emit(t,{value:this.getColumnValue(0),index:this.getColumnIndex(0)}):this.$emit(t,{value:this.getValues(),index:this.getIndexes()})},onChange:function(e){this.simple?this.$emit("change",{picker:this,value:this.getColumnValue(0),index:this.getColumnIndex(0)}):this.$emit("change",{picker:this,value:this.getValues(),index:e.currentTarget.dataset.index})},getColumn:function(e){return this.children[e]},getColumnValue:function(e){var t=this.getColumn(e);return t&&t.getValue()},setColumnValue:function(e,t){var n=this.getColumn(e);return null==n?Promise.reject(new Error("setColumnValue: 对应列不存在")):n.setValue(t)},getColumnIndex:function(e){return(this.getColumn(e)||{}).data.currentIndex},setColumnIndex:function(e,t){var n=this.getColumn(e);return null==n?Promise.reject(new Error("setColumnIndex: 对应列不存在")):n.setIndex(t)},getColumnValues:function(e){return(this.children[e]||{}).data.options},setColumnValues:function(e,t,n){void 0===n&&(n=!0);var s=this.children[e];return null==s?Promise.reject(new Error("setColumnValues: 对应列不存在")):JSON.stringify(s.data.options)===JSON.stringify(t)?Promise.resolve():s.set({options:t}).then(function(){n&&s.setIndex(0)})},getValues:function(){return this.children.map(function(e){return e.getValue()})},setValues:function(e){var t=this,n=e.map(function(e,n){return t.setColumnValue(n,e)});return Promise.all(n)},getIndexes:function(){return this.children.map(function(e){return e.data.currentIndex})},setIndexes:function(e){var t=this,n=e.map(function(e,n){return t.setColumnIndex(n,e)});return Promise.all(n)}}});