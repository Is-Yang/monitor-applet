"use strict";function parseOptions(t){return utils_1.isObj(t)?t:{message:t}}function getContext(){var t=getCurrentPages();return t[t.length-1]}function Toast(t){var e=__assign(__assign({},currentOptions),parseOptions(t)),n=e.context||getContext(),s=n.selectComponent(e.selector);return s?(delete e.context,delete e.selector,s.clear=function(){s.setData({show:!1}),e.onClose&&e.onClose()},queue.push(s),s.setData(e),clearTimeout(s.timer),e.duration>0&&(s.timer=setTimeout(function(){s.clear(),queue=queue.filter(function(t){return t!==s})},e.duration)),s):void console.warn("未找到 van-toast 节点，请确认 selector 及 context 是否正确")}var __assign=function(){return __assign=Object.assign||function(t){for(var e,n=1,s=arguments.length;n<s;n++){e=arguments[n];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])}return t},__assign.apply(this,arguments)};Object.defineProperty(exports,"__esModule",{value:!0});var utils_1=require("./../common/utils.js"),defaultOptions={type:"text",mask:!1,message:"",show:!0,zIndex:1e3,duration:2e3,position:"middle",forbidClick:!1,loadingType:"circular",selector:"#van-toast"},queue=[],currentOptions=__assign({},defaultOptions),createMethod=function(t){return function(e){return Toast(__assign({type:t},parseOptions(e)))}};Toast.loading=createMethod("loading"),Toast.success=createMethod("success"),Toast.fail=createMethod("fail"),Toast.clear=function(){queue.forEach(function(t){t.clear()}),queue=[]},Toast.setDefaultOptions=function(t){Object.assign(currentOptions,t)},Toast.resetDefaultOptions=function(){currentOptions=__assign({},defaultOptions)},exports.default=Toast;